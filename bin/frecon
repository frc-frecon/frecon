#! /usr/bin/env ruby

# Smartly require "frecon".
begin
	require "frecon"
rescue LoadError => e
	lib_directory = File.join(File.dirname(__FILE__), "..", "lib")

	# Adding the lib_directory did not fix the problem,
	# so give up on fixing it.
	if $LOAD_PATH.include?(lib_directory)
		raise e
	else
		retry
	end
	
	# If it whines because it can't load it,
	# add the "../lib/" directory to the $LOAD_PATH.
	$LOAD_PATH.unshift(lib_directory)
end

unless ARGV.include?("c") || ARGV.include?("console")
	FReCon::Server.start
else
	FReCon::Console.start
end
